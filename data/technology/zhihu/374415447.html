<p data-pid="03pF8Rpk">由于root用户一开始没有密码或者密码被锁定了，所以如果我们直接，</p><div class="highlight"><pre><code class="language-text"><span></span>su root
</code></pre></div><p data-pid="hRj5p6Wx">则会出现如下错误，</p><div class="highlight"><pre><code class="language-text"><span></span>su: Authentication failure
</code></pre></div><p data-pid="JBtyicyG">[OP1] 这时需要先为root用户设置密码，</p><div class="highlight"><pre><code class="language-text"><span></span>sudo passwd root
</code></pre></div><p data-pid="dW_FgV51">输入密码、重复密码后，可以看到，</p><div class="highlight"><pre><code class="language-text"><span></span>passwd: password updated successfully
</code></pre></div><p data-pid="xsGDjVH9">[OP2] 这时还需要对root用户的密码进行解锁。</p><div class="highlight"><pre><code class="language-text"><span></span>sudo passwd --unlook root
</code></pre></div><p data-pid="bRGPhRM1">解锁操作后得到以下。我们当然也可以通过<code>-l</code>参数类似地进行上锁。</p><div class="highlight"><pre><code class="language-text"><span></span>passwd: password expiry information changed.
</code></pre></div><p data-pid="h6oF6Q5g">这时候退出然后直接以root用户登录会报<code>Permission denied</code>的错误，[OP3] 我们还需要设置ssh允许root登录，</p><div class="highlight"><pre><code class="language-text"><span></span>sudo sed -i "s/^#PermitRootLogin.*/PermitRootLogin yes/g" /etc/ssh/sshd_config
</code></pre></div><p data-pid="izOZVnGu">[OP3] 然后我们重启ssh服务，</p><div class="highlight"><pre><code class="language-text"><span></span>sudo systemctl restart ssh
</code></pre></div><p data-pid="zT6kIQ80">这时已经可以通过ssh进行登录，但登录时仍然会校验密码，就是OP1中设置的密码，</p><div class="highlight"><pre><code class="language-text"><span></span>ssh root@192.168.1.X
</code></pre></div><p data-pid="59AUIUGW">[OP4] 接下来以root权限修改 <code>/etc/ssh/sshd_config</code>文件，将公钥身份验证配置的注释打开，</p><div class="highlight"><pre><code class="language-text"><span></span>PubkeyAuthentication yes
</code></pre></div><p data-pid="LL7a5o8C">接下来我们把本地/上位机的公钥拷贝到root用户的<code>~/.ssh/authorized_keys</code>下。[OP5] 首先在上位机中拷贝公钥，</p><div class="highlight"><pre><code class="language-text"><span></span>cat ~/.ssh/id_rsa.pub
</code></pre></div><p data-pid="3WnfDFzO">如果以前没有生成过rsa秘钥对，可以通过<code>ssh-keygen</code>命令生成，参考博客<a href="http://link.zhihu.com/?target=https%3A//www.cnblogs.com/yanglang/p/9563496.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">SSH-keygen用法</a>。接下来，[OP6] 将剪贴板中的公钥粘贴到树莓派的root用户下的<code>~/.ssh/authorized_keys</code>文件中。可以通过<code>ls -a ~</code>查看.ssh文件夹是否存在，如果不存在就通过<code>mkdir ~/.ssh</code>创建一个，然后通过<code>vim ~/.ssh/authorized_keys</code>去编辑该文件。接下来就大工告成了，可以通过ssh直接登录root。</p><div class="highlight"><pre><code class="language-text"><span></span>(base) ➜  ~ ssh root@192.168.1.X
Linux raspberrypi 5.10.17-v7l+ #1403 SMP Mon Feb 22 11:33:35 GMT 2021 armv7l ...
</code></pre></div><hr><p data-pid="5yWRsAiz">鉴于篇幅比较短，我补充一点关于树莓派散热的问题。树莓派工作的时候是真的烫烫烫！这么烫对于程序来说可不太吉利 [doge]。所以说我买了个壳子，配了散热片和小风扇。</p><figure data-size="normal"><noscript><img src="https://pica.zhimg.com/v2-c8a8abd69243d3362f78512464d91d8a_720w.jpg?source=d16d100b" data-caption="" data-size="normal" data-rawwidth="5184" data-rawheight="2181" class="origin_image zh-lightbox-thumb" width="5184" data-original="https://pic1.zhimg.com/v2-c8a8abd69243d3362f78512464d91d8a_720w.jpg?source=d16d100b"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='5184'%20height='2181'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="5184" data-rawheight="2181" class="origin_image zh-lightbox-thumb lazy" width="5184" data-original="https://pic1.zhimg.com/v2-c8a8abd69243d3362f78512464d91d8a_720w.jpg?source=d16d100b" data-actualsrc="https://pica.zhimg.com/v2-c8a8abd69243d3362f78512464d91d8a_720w.jpg?source=d16d100b"></figure><p data-pid="zBtNfmjF">小风扇就是个很简单的单向风扇，我试过将两极对调，转不起来。所以我们在安装的时候就要决定好风扇吹风的方向。关于方向的问题我和舍友争论了很久，最终我妥协了，还是决定风扇对着散热片吹风。</p><p data-pid="W7_ZlMth">风扇的红线接VCC 5V引脚，黑线接GND引脚。这时我们就需要参考一下引脚图了：<a href="http://link.zhihu.com/?target=https%3A//www.raspberrypi.org/documentation/hardware/raspberrypi/schematics/rpi_SCH_4b_4p0_reduced.pdf" class=" wrap external" target="_blank" rel="nofollow noreferrer">树莓派4b官方引脚图</a>。</p><figure data-size="normal"><noscript><img src="https://picx.zhimg.com/v2-e00b00c59714f3d11729646b864ba20a_720w.jpg?source=d16d100b" data-caption="" data-size="normal" data-rawwidth="1735" data-rawheight="825" class="origin_image zh-lightbox-thumb" width="1735" data-original="https://pic1.zhimg.com/v2-e00b00c59714f3d11729646b864ba20a_720w.jpg?source=d16d100b"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1735'%20height='825'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="1735" data-rawheight="825" class="origin_image zh-lightbox-thumb lazy" width="1735" data-original="https://pic1.zhimg.com/v2-e00b00c59714f3d11729646b864ba20a_720w.jpg?source=d16d100b" data-actualsrc="https://picx.zhimg.com/v2-e00b00c59714f3d11729646b864ba20a_720w.jpg?source=d16d100b"></figure><p data-pid="JFqsy0k-">可以看到满足5V和GND相邻的只有4、6引脚，所以我们把红线插在PIN4，黑线插在PIN6。</p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-c8c40e3fb3869a07ebb987621fa89bac_720w.jpg?source=d16d100b" data-caption="" data-size="normal" data-rawwidth="5184" data-rawheight="2666" class="origin_image zh-lightbox-thumb" width="5184" data-original="https://picx.zhimg.com/v2-c8c40e3fb3869a07ebb987621fa89bac_720w.jpg?source=d16d100b"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='5184'%20height='2666'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="5184" data-rawheight="2666" class="origin_image zh-lightbox-thumb lazy" width="5184" data-original="https://picx.zhimg.com/v2-c8c40e3fb3869a07ebb987621fa89bac_720w.jpg?source=d16d100b" data-actualsrc="https://pic1.zhimg.com/v2-c8c40e3fb3869a07ebb987621fa89bac_720w.jpg?source=d16d100b"></figure><p></p>