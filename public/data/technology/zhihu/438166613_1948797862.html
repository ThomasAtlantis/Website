<p data-pid="ylOyLNco">这个问题挺有意思，我跟答一条，谈谈它的应用。最近在翻译论文的时候遇到了一个难题：文本中夹杂有太多的公式，如何翻译出叙述逻辑同时保持公式内容不变呢？最简单的想法就是将每一个公式替换为一个UUID（书写成翻译软件不翻译的停用词格式，比如使用尖括号括起来），然后进行翻译，将翻译的结果再按照之前的映射关系逆向映射回去。这里需要使用的核心技术就是，正则匹配中统一匹配、分别替换的功能。</p><div class="highlight"><pre><code class="language-python"><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">'a.b.c.d.e.f.g'</span>

<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'1'</span><span class="p">,</span> <span class="s1">'2'</span><span class="p">,</span> <span class="s1">'3'</span><span class="p">,</span> <span class="s1">'4'</span><span class="p">,</span> <span class="s1">'5'</span><span class="p">,</span> <span class="s1">'6'</span><span class="p">]</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>  <span class="c1"># nums = '123456'.__iter__()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">"\."</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">repl</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">next</span><span class="p">(</span><span class="n">nums</span><span class="p">)))</span>


<span class="n">nums</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'a'</span><span class="p">:</span> <span class="s2">"alpha"</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span> <span class="s2">"beta"</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">:</span> <span class="s2">"gamma"</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">:</span> <span class="s2">"delta"</span> <span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">"[a-z]"</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">repl</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">nums</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">group</span><span class="p">()]))</span>
</code></pre></div><p></p>