<p data-pid="HckMYqbC">我这几天也被这个问题困扰了很久，因为windows上安装了不少重要的软件也不敢直接修改用户名或者重置系统，所以只能从scp命令本身下手。</p><p data-pid="ai5qIUXh">我的局域网里一共两台电脑，一台Windows11台式机，地址为192.168.0.2，一台MacOS笔记本，地址为192.168.0.3。由于台式机是新买的，很多重要资料在Mac上面，不想通过U盘来回拷贝，于是在两个机器上分别开启了局域网的SSH远程访问权限，并写了一些辅助脚本。之前我一直是使用Python自带的HTTP服务器，但这种明文传输、无限制访问的方式非常危险：</p><div class="highlight"><pre><code class="language-bash"><span></span>python -m http.server <span class="m">80</span>
</code></pre></div><p data-pid="UeMKViyQ">其实scp不能直接使用中文这个问题不是bash脚本的问题，可以发现ssh命令是可以正常工作的：</p><div class="highlight"><pre><code class="language-bash"><span></span>ssh 清川@192.168.0.2
</code></pre></div><p data-pid="qqMu_Xgc">而scp命令会出现invalid username错误：</p><div class="highlight"><pre><code class="language-bash"><span></span>scp some_file 清川@192.168.0.2:C:/Users/清川/Desktop/
</code></pre></div><p data-pid="Pz7QUvRd"><b>正确的使用方法</b>如下：</p><div class="highlight"><pre><code class="language-bash"><span></span>scp -o <span class="nv">user</span><span class="o">=</span><span class="s2">"清川"</span> some_file <span class="m">192</span>.168.0.2:C:/Users/清川/Desktop/
</code></pre></div><p data-pid="QZQ-9oAO">另外注意，scp命令的参数位置在souce和target前面，不可颠倒，正如SSH的-p端口参数需要在destination前面。为了方便进一步使用我们可以在两台机器的桌面上都新建一个LANFileCache文件夹，然后各自编写脚本，每次传入文件名，即可推送到对方的LANFileCache中。在windows上我使用的是VB脚本，可以通过拖放很方便地传输文件。</p><p data-pid="o7nWfygv">当然也可以选择专门的软件来实现这一切，但我比较喜欢命令行，而且通过命令的方式对不同平台的兼容性比较好。</p>